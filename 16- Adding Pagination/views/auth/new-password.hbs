<div class="new-password-container">
    <div class="form-card">
        <h1 class="page-title">Set New Password</h1>
        <p class="instructions">Please enter and confirm your new password below.</p>

        {{#if errorMessage}}
        <div class="alert error">
            <p>{{errorMessage}}</p>
        </div>
        {{/if}}

        {{#if successMessage}}
        <div class="alert success">
            <p>{{successMessage}}</p>
        </div>
        {{/if}}

        <form action="/new-password" method="POST" class="password-form">
            <input type="hidden" name="_csrf" value="{{csrfToken}}">
            <input type="hidden" name="token" value="{{token}}">
            <input type="hidden" name="userId" value="{{userId}}">

            <div class="form-group">
                <label for="password">New Password</label>
                <input type="password" id="password" name="password" required minlength="6" class="form-control">
                <div class="password-strength-meter">
                    <div class="strength-label">Password strength:</div>
                    <div class="strength-bars">
                        <span></span><span></span><span></span><span></span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required minlength="6"
                    class="form-control">
                <div class="validation-message" id="confirm-validation"></div>
            </div>

            <div class="password-requirements">
                <h4>Password must:</h4>
                <ul>
                    <li id="length-check">Be at least 6 characters long</li>
                    <li id="match-check">Passwords must match</li>
                </ul>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Update Password</button>
            </div>

            <div class="form-links">
                <a href="/login" class="back-link">Back to Login</a>
            </div>
        </form>
    </div>
</div>